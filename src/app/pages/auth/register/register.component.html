<div class="register-container">
    <nb-card class="register-card">
        <nb-card-header class="text-center">
            <nb-icon icon="person-add-outline" class="logo-icon"></nb-icon>
            <h2>Create an Account</h2>
            <p>Fill in the form below to create your account</p>
        </nb-card-header>

        <nb-card-body>
            <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
                <!-- Company Name -->
                <div class="form-group">
                    <label for="companyName">Company Name</label>
                    <input
                            nbInput
                            fullWidth
                            id="companyName"
                            formControlName="companyName"
                            placeholder="Enter your company name"
                            [status]="getFieldStatus('companyName')">
                    <small class="text-danger" *ngIf="registerForm.get('companyName')?.invalid && registerForm.get('companyName')?.touched">
                        Company name is required
                    </small>
                </div>

                <!-- Legal Representative -->
                <div class="form-group">
                    <label for="legalRepresentative">Legal Representative</label>
                    <input
                            nbInput
                            fullWidth
                            id="legalRepresentative"
                            formControlName="legalRepresentative"
                            placeholder="Legal representative's name"
                            [status]="getFieldStatus('legalRepresentative')">
                    <small class="text-danger" *ngIf="registerForm.get('legalRepresentative')?.invalid && registerForm.get('legalRepresentative')?.touched">
                        Legal representative's name is required
                    </small>
                </div>

                <!-- Phone -->
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input
                            nbInput
                            fullWidth
                            id="phone"
                            formControlName="phone"
                            placeholder="Enter your phone number"
                            [status]="getFieldStatus('phone')">
                    <small class="text-danger" *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched">
                        Phone number is required
                    </small>
                </div>

                <!-- Email -->
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input
                            nbInput
                            fullWidth
                            type="email"
                            id="email"
                            formControlName="email"
                            placeholder="Enter your email"
                            [status]="getFieldStatus('email')">
                    <small class="text-danger" *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched">
                        Please enter a valid email address
                    </small>
                </div>

                <!-- Password -->
                <div class="form-group">
                    <label for="password">Password</label>
                    <div class="password-input-container">
                        <input
                                nbInput
                                fullWidth
                                [type]="showPassword ? 'text' : 'password'"
                                id="password"
                                formControlName="password"
                                placeholder="Create a password"
                                [status]="getFieldStatus('password')">
                        <button
                                nbButton
                                ghost
                                type="button"
                                (click)="togglePasswordVisibility()"
                                class="password-toggle">
                            <nb-icon [icon]="showPassword ? 'eye-off-outline' : 'eye-outline'"></nb-icon>
                        </button>
                    </div>
                    <small class="text-danger" *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched">
                        Password must be at least 8 characters long
                    </small>
                    <div class="password-strength" *ngIf="passwordStrength.show">
                        <div class="strength-bar" [ngClass]="passwordStrength.colorClass"></div>
                        <span class="strength-text" [ngClass]="passwordStrength.textClass">
              {{ passwordStrength.text }}
            </span>
                    </div>
                </div>

                <!-- Confirm Password -->
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <div class="password-input-container">
                        <input
                                nbInput
                                fullWidth
                                [type]="showConfirmPassword ? 'text' : 'password'"
                                id="confirmPassword"
                                formControlName="confirmPassword"
                                placeholder="Confirm your password"
                                [status]="getFieldStatus('confirmPassword')">
                        <button
                                nbButton
                                ghost
                                type="button"
                                (click)="toggleConfirmPasswordVisibility()"
                                class="password-toggle">
                            <nb-icon [icon]="showConfirmPassword ? 'eye-off-outline' : 'eye-outline'"></nb-icon>
                        </button>
                    </div>
                    <small class="text-danger" *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched">
                        Please confirm your password
                    </small>
                </div>

                <!-- Terms and Conditions -->
                <div class="form-group terms-checkbox">
                    <nb-checkbox formControlName="acceptTerms" [status]="getFieldStatus('acceptTerms')">
                        I agree to the <a href="#" class="terms-link">Terms and Conditions</a> and <a href="#" class="terms-link">Privacy Policy</a>
                    </nb-checkbox>
                    <small class="text-danger" *ngIf="registerForm.get('acceptTerms')?.invalid && registerForm.get('acceptTerms')?.touched">
                        You must accept the terms and conditions
                    </small>
                </div>

                <!-- Submit Button -->
                <button
                        nbButton
                        fullWidth
                        status="primary"
                        size="large"
                        type="submit"
                        [disabled]="registerForm.invalid || isLoading"
                        class="register-button">
                    <nb-icon *ngIf="!isLoading" icon="person-add-outline" class="mr-1"></nb-icon>
                    <nb-icon *ngIf="isLoading" icon="loader-outline" class="spinner mr-1"></nb-icon>
                    {{ isLoading ? 'Creating Account...' : 'Create Account' }}
                </button>

                <!-- Error Message -->
                <nb-alert *ngIf="registerError" status="danger" class="mt-3">
                    {{ registerError }}
                </nb-alert>
            </form>
        </nb-card-body>

        <nb-card-footer class="text-center">
            <p class="login-link">
                Already have an account? <a routerLink="/auth/login" class="login-link-text">Sign In</a>
            </p>
        </nb-card-footer>
    </nb-card>
</div>